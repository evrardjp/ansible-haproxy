[tox]
minversion = 1.8
envlist = lint,backends-fragments,cleanup-fragments,defaults-fragments,frontends-fragments,global-fragment,listen-fragments,others-fragments,user-fragments,full-example
skipsdist = true

[testenv]
platform = linux
passenv = *
deps =
    -r dev-requirements.txt
commands =
    ansible-galaxy collection install community.docker
    ansible-playbook tests/{envname}/play.yml

[testenv:lint]
platform = linux|darwin
commands =
   ansible-lint
   yamllint {toxinidir}
